<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>jEvent - Шаблон страницы</title>

    <!-- CSS -->
    <link href="../css/normalize.css" rel="stylesheet">
    <link href="../css/bootstrap.css" rel="stylesheet">
    <link href="../css/font-awesome.css" rel="stylesheet">
    <link href="../css/custom.css" rel="stylesheet">

</head>
<body>
<div class="container-fluid">
    <section class="row" id="navigation">
        <!--top menu here -->
        <!--from __data-source.html-->
    </section>

    <section class="row" id="main-content">

        <div id="left-menu" class="col-sm-3 col-md-3 col-lg-2 hidden-xs sidebar">
            <!--Left content menu here-->
            <!--from __data-source.html-->
        </div>

        <div class="col-sm-9  col-md-9 col-lg-10 main">

            <!-- Content here -->

            <div class="header-row">
                <h2>Конференция: jPoint 2016</h2>
            </div>

            <div id="search-panel">

            </div>

            <div>
                <!-- Nav tabs -->
                <ul class="nav nav-tabs" role="tablist">
                    <li role="presentation" class="active"><a href="#speakers" aria-controls="speakers" role="tab"
                                                              data-toggle="tab">Спикеры</a></li>
                    <li role="presentation"><a href="#conference" aria-controls="conference" role="tab"
                                               data-toggle="tab">Конференция</a></li>

                </ul>

                <!-- Tab panes -->
                <div class="tab-content">
                    <div role="tabpanel" class="tab-pane active" id="speakers">
                        <table id="confirm-speaker-table" class="table table-hover avatar-table">
                            <thead>
                            <tr>
                                <th class="avatar"></th>
                                <th>Имя</th>
                                <th>Тема</th>
                                <th>Статус в jira</th>
                                <th>Источник</th>
                                <th>Рейтинги</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <th class="avatar" scope="row"><img class="media-object img-circle img-responsive"
                                                                    src="../img/visitors/shipilev.jpg"></th>
                                <td><a href="#">Алексей Шипилев</a></td>
                                <td><a href="#">The Lord of the Strings: Two Scours</a></td>
                                <td>
                                    <button type="button" class="btn btn-xs btn-primary" disabled="disabled">Фидбек
                                        спикера
                                    </button>
                                </td>
                                <td>
                                    <button type="button" class="btn btn-xs btn-primary" disabled="disabled">jira
                                    </button>
                                </td>
                                <td>
                                    <div class="">jPoint 2014: 4,89%</div>
                                    <div class="">jPoint 2015: 4,98%</div>
                                </td>
                            </tr>
                            <tr>

                            <tr>
                                <th class="avatar" scope="row"><img class="media-object img-circle img-responsive"
                                                                    src="../img/visitors/valeev.jpg"></th>
                                <td><a href="#">Тагир Валеев</a></td>
                                <td><a href="#">Странности Stream API</a></td>
                                <td>
                                    <button type="button" class="btn btn-xs btn-primary" disabled="disabled">Анализ
                                    </button>
                                </td>
                                <td>
                                    <button type="button" class="btn btn-xs btn-primary" disabled="disabled">jira
                                    </button>
                                </td>
                                <td></td>
                            </tr>
                            <tr>

                            <tr>
                                <th class="avatar" scope="row"><img class="media-object img-circle img-responsive"
                                                                    src="../img/visitors/pangin.jpg"></th>
                                <td><a href="#">Андрей Паньгин</a></td>
                                <td><a href="#">Глубже стек-трейсов, шире хип-дампов</a></td>
                                <td>
                                    <button type="button" class="btn btn-xs btn-primary" disabled="disabled">Анализ
                                    </button>
                                </td>
                                <td>
                                    <button type="button" class="btn btn-xs btn-warning" disabled="disabled">Вручную
                                    </button>
                                </td>
                                <td>
                                    <div class="">jPoint 2014: 4,79%</div>
                                </td>
                            </tr>
                            <tr>

                            <tr>
                                <th class="avatar" scope="row"><img class="media-object img-circle img-responsive"
                                                                    src="../img/visitors/sudogursky.jpg"></th>
                                <td><a href="#">Барух Садогурский</a></td>
                                <td><a href="#">Работает — не трогай! Или зачем мы опять переделали всю архитектуру</a>
                                </td>
                                <td>
                                    <button type="button" class="btn btn-xs btn-primary" disabled="disabled">Анализ
                                    </button>
                                </td>
                                <td>
                                    <button type="button" class="btn btn-xs btn-primary" disabled="disabled">jira
                                    </button>
                                </td>
                                <td>
                                    <div class="">jPoint 2015: 4,85%</div>
                                </td>
                            </tr>
                            <tr>

                            </tbody>
                        </table>
                    </div>

                    <div role="tabpanel" class="tab-pane" id="conference">
                        <p>А что тут можно выводить?</p>
                        <ul>
                            <li>Дата проведения</li>
                            <li>Место проведения</li>
                            <li>Количество утвержденных спикеров</li>
                            <li>Количество проданных билетов (ели вообще мы их отслеживаем, а не получаем инфу по факту
                                отзыва)
                            </li>
                        </ul>
                    </div>
                </div>

            </div>


        </div>

    </section>
    <!--footer here -->
    <!--from __data-source.html-->
    <section id="footer" class="row footer">

    </section>
</div>


<!-- javascript -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/tether/1.3.1/js/tether.min.js"></script>

<!--<script src="../js/bootstrap.js"></script>-->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
        integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous"></script>
<script>
    //    add header navigation
    $("#navigation").load("../je_templates/__data-source.html #navigation nav");
    //    add footer
    $("#footer").load("../je_templates/__data-source.html #footer .container");
    //    add left menu
    $("#left-menu").load("../je_templates/__data-source.html #left-event-view-menu");
    //    add search panel
    $("#search-panel").load("../je_templates/__data-source.html #event-view-search");
</script>

<script>
    var eventMap = new Map();
    var speechMap = new Map();
    var speakerMap = new Map();

    var eventid = getUrlParameter('id');

    //    $("#confirm-speaker-table tbody");

    //    var versions = new Set();

    function getUrlParameter(sParam) {
        var sPageURL = decodeURIComponent(window.location.search.substring(1)),
                sURLVariables = sPageURL.split('&'),
                sParameterName,
                i;

        for (i = 0; i < sURLVariables.length; i++) {
            sParameterName = sURLVariables[i].split('=');

            if (sParameterName[0] === sParam) {
                return sParameterName[1] === undefined ? true : sParameterName[1];
            }
        }
    }
    function loadData() {
        $.getJSON('../data/events.json', function (data) {
            data.forEach(function (entry) {
                eventMap.set(entry.id, entry);
            })
        })
        $.getJSON('../data/speakers.json', function (data) {
            data.forEach(function (entry) {
                speakerMap.set(entry.id, entry);
            })
        })
        $.getJSON('../data/speeches.json', function (data) {
            data.forEach(function (entry) {
                speechMap.set(entry.id, entry);
            })
        })
    }

    /*
     <th class="avatar" scope="row"><img class="media-object img-circle img-responsive" src="../img/visitors/shipilev.jpg"></th>
     <td><a href="#">Алексей Шипилев</a></td>
     <td><a href="#">The Lord of the Strings: Two Scours</a></td>
     <td><button type="button" class="btn btn-xs btn-primary" disabled="disabled">Фидбек спикера</button></td>
     <td><button type="button" class="btn btn-xs btn-primary" disabled="disabled">jira</button></td>
     <td><div class="">jPoint 2014: 4,89%</div> <div class="">jPoint 2015: 4,98%</div></td>
     */
    function printEventList(el, event) {
        $(el).append('<tr>' +
                '<th class="avatar" scope="row"><img class="media-object img-circle img-responsive" src="' + event.logo + '"></th>' +
                '<td><a href="' + '../event/view.html?id=' + event.id + '">' + event.name + '</a></td>' +
                '<td>' + event.version + '</td>' +
                '<td class="table-sm-center">' + event.approvedSpeakers.length + '</td>' +
                '<td class="table-sm-center">' + event.newSpeakers.length + '</td>' +
                '<td>' + event.date + '</td>' +
                '</tr>' +
                '<tr>');
    }


    function addVersions(v) {
        var str1 = '<p>Версии</p>';
        var str3 = '</div>';
        var str2 = '';
        v.forEach(function (entry) {
            str2 = str2 + '<div class="checkbox">' +
                    '<label>' +
                    '<input type="checkbox" value="' + entry + '" checked> ' + entry +
                    '</label>' +
                    '</div>';
        });
        $("#versions").append(str1 + str2 + str3);
    }
    function init() {
        $.getJSON('../data/events.json', function (data) {
            events = data;
            events.forEach(function (entry) {
                printEventList(elem, entry);
                versions.add(entry.version);
            })
            addVersions(versions);
        });
    }
    function update() {
        $.getJSON('../data/events.json', function (data) {
            events = data;
        });
    }

    console.log(eventid);
    loadData();
    //    init();

    /*    $("#update").click(function () {
     elem.empty();
     $("#versions").empty();

     init();
     });*/


</script>
</body>

</html>